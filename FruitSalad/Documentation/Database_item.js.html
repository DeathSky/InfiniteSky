<!DOCTYPE html>

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=yes, width=device-width">
  <title>InfiniteSky â€” Source: Database/item.js</title>
  <link rel="shortcut icon" href="/favicon.ico">

  <!--[if lt IE 9]>
  <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <link type="text/css" rel="stylesheet" href="styles/sunlight.dark.css">

  <link type="text/css" rel="stylesheet" href="styles/site.oblivion.css">
</head>
<body>
<div class="container-fluid">
  <div class="navbar navbar-fixed-top navbar-inverse">
    <div class="navbar-inner">
      <a class="brand" href="index.html">InfiniteSky</a>
      <ul class="nav">
        
        <li class="dropdown">
          <a href="namespaces.list.html" class="dropdown-toggle" data-toggle="dropdown">Namespaces<b
            class="caret"></b></a>

          <ul class="dropdown-menu ">
            
            <li>
              <a href="Zone_recv.html">Zone/recv</a>
            </li>
            
            <li>
              <a href="Zone_send.html">Zone/send</a>
            </li>
            

          </ul>
        </li>
        
        <li class="dropdown">
          <a href="modules.list.html" class="dropdown-toggle" data-toggle="dropdown">Modules<b
            class="caret"></b></a>

          <ul class="dropdown-menu ">
            
            <li>
              <a href="module-Helper_ChildProcessHost.html">Helper/ChildProcessHost</a>
            </li>
            
            <li>
              <a href="module-LoginInstance.html">LoginInstance</a>
            </li>
            
            <li>
              <a href="module-PacketCollection.html">PacketCollection</a>
            </li>
            
            <li>
              <a href="module-Restruct.html">Restruct</a>
            </li>
            
            <li>
              <a href="module-vmscript.html">vmscript</a>
            </li>
            
            <li>
              <a href="module-ZoneInstance.html">ZoneInstance</a>
            </li>
            

          </ul>
        </li>
        
        <li class="dropdown">
          <a href="classes.list.html" class="dropdown-toggle" data-toggle="dropdown">Classes<b
            class="caret"></b></a>

          <ul class="dropdown-menu ">
            
            <li>
              <a href="CharacterInfos.html">CharacterInfos</a>
            </li>
            
            <li>
              <a href="Command.html">Command</a>
            </li>
            
            <li>
              <a href="CVec3.html">CVec3</a>
            </li>
            
            <li>
              <a href="db.Account.html">db.Account</a>
            </li>
            
            <li>
              <a href="db.Item.html">db.Item</a>
            </li>
            
            <li>
              <a href="module-Helper_ChildProcessHost-ChildProcessHost.html">Helper/ChildProcessHost~ChildProcessHost</a>
            </li>
            
            <li>
              <a href="module-vmscript-VMScriptObj.html">vmscript~VMScriptObj</a>
            </li>
            

          </ul>
        </li>
        
        <li class="dropdown">
          <a href="mixins.list.html" class="dropdown-toggle" data-toggle="dropdown">Mixins<b
            class="caret"></b></a>

          <ul class="dropdown-menu ">
            
            <li>
              <a href="-_anonymous_-structs.CVec3.html"><anonymous>~structs.CVec3</a>
            </li>
            

          </ul>
        </li>
        
        <li class="dropdown">
          <a href="tutorials.list.html" class="dropdown-toggle" data-toggle="dropdown">Tutorials<b
            class="caret"></b></a>

          <ul class="dropdown-menu ">
            
            <li>
              <a href="tutorial-command_.html">command</a>
            </li>
            
            <li>
              <a href="tutorial-Project Layout.html">Project Layout</a>
            </li>
            

          </ul>
        </li>
        
        <li class="dropdown">
          <a href="global.html" class="dropdown-toggle" data-toggle="dropdown">Global<b
            class="caret"></b></a>

          <ul class="dropdown-menu ">
            
            <li>
              <a href="global.html#_id">_id</a>
            </li>
            
            <li>
              <a href="global.html#autocomplete">autocomplete</a>
            </li>
            
            <li>
              <a href="global.html#calculation">calculation</a>
            </li>
            
            <li>
              <a href="global.html#DamageDealer">DamageDealer</a>
            </li>
            
            <li>
              <a href="global.html#defaultPacketFunction">defaultPacketFunction</a>
            </li>
            
            <li>
              <a href="global.html#deg2rad">deg2rad</a>
            </li>
            
            <li>
              <a href="global.html#FujinModifiers">FujinModifiers</a>
            </li>
            
            <li>
              <a href="global.html#GuanyinModifiers">GuanyinModifiers</a>
            </li>
            
            <li>
              <a href="global.html#JinongModifiers">JinongModifiers</a>
            </li>
            
            <li>
              <a href="global.html#NanginTrack_Countdown">NanginTrack_Countdown</a>
            </li>
            
            <li>
              <a href="global.html#NanginTrack_Finished">NanginTrack_Finished</a>
            </li>
            
            <li>
              <a href="global.html#NanginTrack_Init">NanginTrack_Init</a>
            </li>
            
            <li>
              <a href="global.html#NanginTrack_onLoad">NanginTrack_onLoad</a>
            </li>
            
            <li>
              <a href="global.html#NanginTrack_Start">NanginTrack_Start</a>
            </li>
            
            <li>
              <a href="global.html#ObjectId">ObjectId</a>
            </li>
            
            <li>
              <a href="global.html#rad2deg">rad2deg</a>
            </li>
            

          </ul>
        </li>
        
      </ul>
    </div>
  </div>

  <div class="row-fluid">

    

    
      <div class="span12">
        
        <div id="main">
          


		<h1 class="page-title">Source: Database/item.js</h1>
    
<section>
  <article>
    <pre
      class="sunlight-highlight-javascript linenums">// This file is part of InfiniteSky.
// Copyright (c) InfiniteSky Dev Teams - Licensed under GNU GPL
// For more information, see LICENCE in the main folder
vms('ItemInfo', [], function(){
	var itemSchema = mongoose.Schema({
		_id: { type: Number, unique: true, index: true, default: 0 },
	    Name: String,
	    Rareness: Number,
	    ItemType: Number,
	    DisplayItem2D: Number,
	    // _1: Number,
	    Level: Number, // Level Requirement
	    Clan: Number,
	    // _4: Number,
	    // _5: Number,
	    // _6: Number,,
	    // _7: Number,
	    // _8: Number,
	    // _9: Number,
	    // _10: Number,
	    // _11: Number,
	    // _12: Number,
	    PurchasePrice: Number,
	    SalePrice: Number,
	    // _13: Number,
	    Capacity: Number,
	    LevelRequirement: Number,
	    HonorPointReq: Number,
	    // _15a: Number,
	    Strength: Number,
	    Dexterity: Number,
	    Vitality: Number,
	    Chi: Number,
	    Luck: Number,
	    Damage: Number,
	    Defense: Number,
			ElementalDamage: Array,
	    // LightDamage: Number,
	    // ShadowDamage: Number,
	    // DarkDamage: Number,
	    ElementalDefense: Array,
			// LightResistance: Number,
	    // ShawdowResistance: Number,
	    // DarkResistance: Number,
	    HitRate: Number,
	    DodgeRate: Number,
	    DeadlyRate: Number,
	    Mastery1: Number,
	    Mastery2: Number,
	    Mastery3: Number,
	    Mastery1_Amount: Number,
	    Mastery2_Amount: Number,
	    Mastery3_Amount: Number,
	    // _14: Number,
	    ValueType: Number,
	    Value1: Number,
	    // _16: Number,
	    // _17: Number,
	    Refinement: Number,
	    ChancetoEarnExperiencePointsfromFinalhit: Number,
	    ExperiencePointEarnedfromFinalhit_PERCENTBONUS_: Number,
	    // _18: Number,
	    // _19: Number,
	    DecreaseChiConsumption: Number,
	    DodgeDeadlyBlow: Number,
	    IncreaseAllSkillMastery: Number,
	    // _20: Number,
	    // _21: Number,
	    // _22: Number,
	    // _23: Number,

	    Description1: String,
	    Description2: String,
	    Description3: String,

			Pet: {type: Object, default: null}

	});



	itemSchema.index({ Name: 1, ItemType: 1 });

	itemSchema.methods.isDroppable = function(){
		//TODO: Check if item is droppable
		return true;
	};

	itemSchema.methods.getItemType = function() {
		var ItemType;
		switch (this.ItemType)
		{
			case 1: ItemType = 'SilverCoins'; break; // SilverCoins
			case 2: ItemType = 'Common'; break;      // Stackable to 99
			case 3: ItemType = 'Assist'; break;      // Assist seems like its grouped to 2, It contains a different kind of pills,
				                                     // couple books and enchanting mats of different quality They are not stacked
			case 4: ItemType = 'Mission'; break;
			case 5: ItemType = 'SkillBook'; break;
			case 6: ItemType = 'CalabashBottle'; break; //testing
			case 7: ItemType = 'Necklace'; break;
			case 8: ItemType = 'Cape'; break;
			case 9: ItemType = 'Outfit'; break; // Outfit
			case 10: ItemType = 'Gloves'; break;
			case 11: ItemType = 'Ring'; break;
			case 12: ItemType = 'Boots'; break; // Bootss
			case 13: ItemType = 'Sword'; break;
			case 14: ItemType = 'Blade'; break;
			case 15: ItemType = 'Marble'; break;
			case 16: ItemType = 'Katana'; break;
			case 17: ItemType = 'DoubleBlade'; break; // test
			case 18: ItemType = 'Lute'; break;
			case 19: ItemType = 'LightBlade'; break;
			case 20: ItemType = 'LongSpear'; break;
			case 21: ItemType = 'Scepter'; break;
			case 22: ItemType = 'Pet'; break; // Sacred Animal
			case 23: ItemType = 'AssistStackable'; break; // Seems like crafting materials at herb master
			case 24: ItemType = 'Common'; break;
			default: ItemType = ''; break;
		};
		return ItemType;
	};

	itemSchema.methods.getInventoryItemType = function() {
		var ItemType;
		switch (this.ItemType)
		{
			case 6: ItemType = 'Bottle'; break;
			case 7: ItemType = 'Amulet'; break;
			case 8: ItemType = 'Cape'; break;
			case 9: ItemType = 'Outfit'; break;
			case 10: ItemType = 'Gloves'; break;
			case 11: ItemType = 'Ring'; break;
			case 12: ItemType = 'Boots'; break;
			case 13:
			case 14:
			case 15:
			case 16:
			case 17:
			case 18:
			case 19:
			case 20:
			case 21:
				ItemType = 'Weapon';
			break;
			case 22: ItemType = 'Pet'; break;
		};
		return ItemType;
	};

	itemSchema.methods.getRareness = function() {
		var Rareness;
		switch (this.Rareness)
		{
			case 1: Rareness = 'Common'; break;
			case 2: Rareness = 'Unique'; break;
			case 3: Rareness = 'Rare'; break;
			case 4: Rareness = 'Elite'; break;
		}
		return Rareness;
	};

	itemSchema.toString = function(kind) {
		switch (kind) {
			case 'small':
				return this.ID+' - '+this.Name;
			break;
			case 'raretype':
				return this.ID+' - '+this.Name+' ('+this.getRareness()+')'+' '+this.getItemType();
			break;
	  		default:
				return this.ID+' - '+this.Name+' ('+this.getRareness()+')'+' '+this.getItemType()+' B:'+this.PurchasePrice+' S:'+this.SalePrice+' Lv:'+this.LevelRequirement;
			break;
		}
	};

	itemSchema.methods.getSlotSize = function() {
		var t = this.ItemType;
	    if (t === 2 || t === 7 || t === 11) {
	        return 0;
	    } else {
	        return 1;
	    }
	};

	itemSchema.methods.isStackable = function() {
		return this.ItemType === ItemType.Common || this.ItemType === ItemType.AssistStackable;
	}

	itemSchema.methods.isAllowedByClan = function(clan){
		clan += 2;
		return this.Clan === 1 || this.Clan === clan;
	};

	itemSchema.methods.getWeaponModIndex = function(clan){
		var baseClan = clan === 0 ? 12 : clan === 1 ? 15 : 18;
		var weaponMod = this.ItemType - baseClan;
		return weaponMod &lt; 0 || weaponMod > 2 ? 0 : weaponMod;
	};

	global.ItemType = {
		SilverCoins: 1,
		Common: 2,
		Assist: 3,
		Mission: 4,
		SkillBook: 5,
		CalabashBottle: 6,
		Necklace: 7,
		Cape: 8,
		Outfit: 9,
		Gloves: 10,
		Ring: 11,
		Shoes: 12,
		Sword: 13,
		Blade: 14,
		Marble: 15,
		Katana: 16,
		DoubleBlade: 17,
		Lute: 18,
		LightBlade: 19,
		LongSpear: 20,
		Scepter: 21,
		Pet: 22,
		AssistStackable: 23,
		AssistAgain: 24
	};


	itemSchema.index({ Name: 1, ItemType: 1 });

	delete mongoose.models['item'];
	var ItemInfo = db.mongoose.model('item', itemSchema);

	/**
	 * Find an Items info by ID
	 * @deprecated use findById
	 * @param {integer} ItemID.
	 */
	ItemInfo.getById = function(id, callback){
		db.Item.findOne({
			_id: id
		}, callback);
	};

	/**
	 * Find an Items info by ID
	 * @param {integer} ItemID.
	 */
	ItemInfo.findById = function findById(id, callback){
		db.Item.findOne({
			_id: id
		}, callback);
	};

	/** @constructor */
	db.Item = ItemInfo;
});
</pre>
  </article>
</section>





        </div>

        <div class="clearfix"></div>
        <footer>
          
          
    <span class="copyright">
    The contributors to the InfiniteSky project.
    </span>
          <br />
          
    <span class="jsdoc-message">
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc" target="_blank">JSDoc 3.4.0</a>
    on Sat Jul 16th 2016
    </span>
        </footer>
      </div>

      <br clear="both">
    </div>

  </div>
  <!--<script src="scripts/sunlight.js"></script>-->
  <script src="scripts/docstrap.lib.js"></script>
  <script src="scripts/bootstrap-dropdown.js"></script>
  <script src="scripts/toc.js"></script>

  <script>
    $( function () {
      $( "[id*='$']" ).each( function () {
        var $this = $( this );

        $this.attr( "id", $this.attr( "id" ).replace( "$", "__" ) );
      } );

      $( "#toc" ).toc( {
        anchorName  : function ( i, heading, prefix ) {
          return $( heading ).attr( "id" ) || ( prefix + i );
        },
        selectors   : "h1,h2,h3,h4",
        showAndHide : false,
        scrollTo    : "100px"
      } );

      $( "#toc>ul" ).addClass( "nav nav-pills nav-stacked" );
      $( "#main span[id^='toc']" ).addClass( "toc-shim" );
      $( '.dropdown-toggle' ).dropdown();
//      $( ".tutorial-section pre, .readme-section pre" ).addClass( "sunlight-highlight-javascript" ).addClass( "linenums" );

      $( ".tutorial-section pre, .readme-section pre" ).each( function () {
        var $this = $( this );

        var example = $this.find( "code" );
        exampleText = example.html();
        var lang = /{@lang (.*?)}/.exec( exampleText );
        if ( lang && lang[1] ) {
          exampleText = exampleText.replace( lang[0], "" );
          example.html( exampleText );
          lang = lang[1];
        } else {
          lang = "javascript";
        }

        if ( lang ) {

          $this
            .addClass( "sunlight-highlight-" + lang )
            .addClass( "linenums" )
            .html( example.html() );

        }
      } );

      Sunlight.highlightAll( {
        lineNumbers : true,
        showMenu : true,
        enableDoclinks : true
      } );
    } );
   </script>



  <!--Navigation and Symbol Display-->
  


  <!--Google Analytics-->
  

</body>
</html>
